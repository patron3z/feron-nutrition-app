{"fsPath":"\\home\\user\\workspace\\src\\components\\ReplicateTestComponent.tsx","fileUuid":"5f4a3d19-60ce-45d9-b0e4-3d6c1a345b6e","fileSizeBytes":4371,"numLines":128,"diffChanges":[{"originalStartLineNumberOneIndexed":1,"originalEndLineNumberExclusiveOneIndexed":1,"modifiedStartLineNumberOneIndexed":1,"modifiedEndLineNumberExclusiveOneIndexed":129,"addedLines":["import React, { useState } from 'react';","import { View, Text, Pressable, ScrollView, Alert, ActivityIndicator } from 'react-native';","import { testReplicateConnection, analyzeNutritionImage, estimateNutritionWithReplicate } from '../api/replicate';","","const ReplicateTestComponent: React.FC = () => {","  const [isLoading, setIsLoading] = useState(false);","  const [testResults, setTestResults] = useState<string>('');","","  const runConnectionTest = async () => {","    setIsLoading(true);","    setTestResults('üß™ Test de connexion Replicate...\\n');","    ","    try {","      const success = await testReplicateConnection();","      setTestResults(prev => prev + `‚úÖ Connexion: ${success ? 'R√©ussie' : '√âchou√©e'}\\n`);","    } catch (error) {","      setTestResults(prev => prev + `‚ùå Erreur connexion: ${error}\\n`);","    }","    ","    setIsLoading(false);","  };","","  const runNutritionEstimateTest = async () => {","    setIsLoading(true);","    setTestResults(prev => prev + '\\nüßÆ Test estimation nutritionnelle...\\n');","    ","    try {","      const result = await estimateNutritionWithReplicate('chicken breast');","      setTestResults(prev => prev + `‚úÖ Estimation poulet: ${JSON.stringify(result, null, 2)}\\n`);","    } catch (error) {","      setTestResults(prev => prev + `‚ùå Erreur estimation: ${error}\\n`);","    }","    ","    setIsLoading(false);","  };","","  const runImageAnalysisTest = async () => {","    setIsLoading(true);","    setTestResults(prev => prev + '\\nüñºÔ∏è Test analyse d\\'image...\\n');","    ","    try {","      // Test avec une image d'exemple","      const testImageUrl = 'https://replicate.delivery/pbxt/MvoFggJfmpSOBa0TiiQbvxLc0eS7u6CpH2WHaq30FZCVIvFa/test.jpg';","      const result = await analyzeNutritionImage(testImageUrl);","      setTestResults(prev => prev + `‚úÖ Analyse image: ${result}\\n`);","    } catch (error) {","      setTestResults(prev => prev + `‚ùå Erreur analyse: ${error}\\n`);","    }","    ","    setIsLoading(false);","  };","","  const runFullTest = async () => {","    setTestResults('üöÄ D√©but des tests complets Replicate...\\n');","    await runConnectionTest();","    await runNutritionEstimateTest();","    await runImageAnalysisTest();","    setTestResults(prev => prev + '\\nüéâ Tests termin√©s!');","  };","","  const clearResults = () => {","    setTestResults('');","  };","","  return (","    <ScrollView className=\"flex-1 bg-white p-4\">","      <Text className=\"text-xl font-bold text-gray-800 mb-4\">Test Replicate GPT-4.1-mini</Text>","      ","      <View className=\"space-y-3 mb-4\">","        <Pressable ","          className=\"bg-blue-500 rounded-lg py-3 px-4\"","          onPress={runConnectionTest}","          disabled={isLoading}","        >","          <Text className=\"text-white font-semibold text-center\">Test Connexion</Text>","        </Pressable>","        ","        <Pressable ","          className=\"bg-green-500 rounded-lg py-3 px-4\"","          onPress={runNutritionEstimateTest}","          disabled={isLoading}","        >","          <Text className=\"text-white font-semibold text-center\">Test Estimation Nutritionnelle</Text>","        </Pressable>","        ","        <Pressable ","          className=\"bg-purple-500 rounded-lg py-3 px-4\"","          onPress={runImageAnalysisTest}","          disabled={isLoading}","        >","          <Text className=\"text-white font-semibold text-center\">Test Analyse Image</Text>","        </Pressable>","        ","        <Pressable ","          className=\"bg-orange-500 rounded-lg py-3 px-4\"","          onPress={runFullTest}","          disabled={isLoading}","        >","          <Text className=\"text-white font-semibold text-center\">Test Complet</Text>","        </Pressable>","        ","        <Pressable ","          className=\"bg-gray-500 rounded-lg py-3 px-4\"","          onPress={clearResults}","          disabled={isLoading}","        >","          <Text className=\"text-white font-semibold text-center\">Effacer</Text>","        </Pressable>","      </View>","      ","      {isLoading && (","        <View className=\"flex-row items-center justify-center py-4\">","          <ActivityIndicator size=\"small\" color=\"#3B82F6\" />","          <Text className=\"ml-2 text-gray-600\">Test en cours...</Text>","        </View>","      )}","      ","      <View className=\"bg-gray-100 rounded-lg p-4 min-h-[200px]\">","        <Text className=\"text-xs font-mono text-gray-800\">","          {testResults || 'Aucun test ex√©cut√©. Cliquez sur un bouton pour commencer.'}","        </Text>","      </View>","    </ScrollView>","  );","};","","export default ReplicateTestComponent;",""],"tokenizedAddedLines":[1000000,1000001,1000002,1000003,1000004,1000005,1000006,1000003,1000007,1000008,1000009,1000010,1000011,1000012,1000013,1000014,1000015,1000016,1000010,1000017,1000018,1000003,1000019,1000008,1000020,1000010,1000011,1000021,1000022,1000014,1000023,1000016,1000010,1000017,1000018,1000003,1000024,1000008,1000025,1000010,1000011,1000026,1000027,1000028,1000029,1000014,1000030,1000016,1000010,1000017,1000018,1000003,1000031,1000032,1000033,1000034,1000035,1000036,1000018,1000003,1000037,1000038,1000018,1000003,1000039,1000040,1000041,1000042,1000043,1000044,1000045,1000046,1000047,1000048,1000049,1000050,1000051,1000044,1000052,1000053,1000047,1000048,1000054,1000050,1000051,1000044,1000055,1000056,1000047,1000048,1000057,1000050,1000051,1000044,1000058,1000059,1000047,1000048,1000060,1000050,1000051,1000044,1000061,1000062,1000047,1000048,1000063,1000050,1000064,1000042,1000065,1000066,1000067,1000068,1000069,1000070,1000042,1000071,1000072,1000073,1000074,1000064,1000075,1000076,1000077,1000003,1000078,1000003]}],"gitInfo":{"noRepoFound":true},"kind":"KIND_ADDED"}